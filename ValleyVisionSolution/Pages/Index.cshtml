@page
@model IndexModel
@{
    ViewData["Title"] = "Home";
}
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    .container {
        max-width: 2000px;
        padding: revert;
    }

    .grid-container {
        display: grid;
        grid-template-rows: 60vh auto;
        gap: 20px; 
        max-width: 2000px;
        margin: 0;
        padding: 0;   
    }

    .top-section {
        
        height: 60vh;
        background-image: url('/images/MadCoHomePagePic.jpeg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        margin: 0;
    }

    .search-bar-container {
        position: absolute;
        top: 46%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40%;
    }

    .bottom-section {
        padding-right: 15vw;
        padding-left: 15vw;
    }

</style>


<div class="grid-container">
    <div class="top-section" id="bkgImage">
        <div class="search-bar-container">
            <form method="get" class="mb-4">
                <div class="input-group">
                    <input type="text" name="searchTerm" class="form-control" placeholder="Search published files..." value="@HttpContext.Request.Query["searchTerm"]">
                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </form>
            @if (!string.IsNullOrEmpty(HttpContext.Request.Query["searchTerm"]))
            {
                <div class="clear-search">
                    <a href="@Url.Page("/Index")" class="badge bg-secondary text-white fs-6 p-2">
                        Clear search: @HttpContext.Request.Query["searchTerm"] <i class="bi bi-x-circle"></i>
                    </a>
                </div>
            }
        </div>
    </div>
@* 
<div class="grid-container">

    <div class="top-section" id="bkgImage">
        <div class="search-bar-container">
            <form method="get" class="mb-4">
                <div class="input-group">
                    <input type="text" name="searchTerm" class="form-control" placeholder="Search published files...">
                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </form>
        </div>
    </div> *@
    
    <div class="bottom-section">
        <div class="content-container">
            <h2>Recently Uploaded</h2>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>File Name</th>
                        <th>File Type</th>
                        <th>Uploaded Date</th>
                        <th>Download</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var resource in Model.PublishedResources)
                    {
                        <tr>
                            <td>@resource.FileName_</td>
                            <td>@resource.FileType</td>
                            <td>@resource.UploadedDateTime.ToString("MM/dd/yyyy")</td>
                            <td>
                                <a href="@Url.Content(resource.FilePath)" class="btn btn-primary" download><i class="bi bi-download"></i></a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

</div>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css">